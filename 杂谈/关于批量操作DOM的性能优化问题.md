# 关于批量操作DOM的性能优化问题

在面试的时候，面试官问了我一个问题：假设需要制作一个todolist，这个todolist已经包含了1000条列表记录（相当于有1000个li）；如今只想更新其中100个列表记录的状态（换个更好理解的场景：小明写了1000个代办事项，但其中有100个事项的dealine是今天，今天一过，这100个列表需要变成灰色），那应该如何利用原生js去操作DOM以达到最优性能呢？

如今仔细一想，心中也有了自己的答案：

要提高页面的性能，其中一个非常重要的因素就是__浏览器的重绘与回流机制__（[详情请戳我](https://github.com/JS-Hao/Study/blob/master/%E6%9D%82%E8%B0%88/%E9%87%8D%E7%BB%98%E4%B8%8E%E5%9B%9E%E6%B5%81.md) ）。如果按照常规的DOM操作，修改其中的100项意味着要对其进行至少100次DOM操作，这将引发的重绘或回流次数是非常大的，这也意味着浏览器需要承担更多的性能损耗。因此本人的解决思路也是从减少重绘回流次数的方向进行考虑：

1. 深复制这1000条列表的根节点（假设它是ul节点）并将其保存在内存中；
2. 直接修改内存中的根节点；
3. 将修改后的节点替换原节点即可。

