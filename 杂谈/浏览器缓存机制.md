# 浏览器缓存机制
现代浏览器的缓存机制，主要有两种，一是HTTP协议所定义的缓存机制，二是一些非HTTP协议定义的缓存机制，如HTML meta标签。而在实际应用中，主要还是以HTTP协议定义的缓存机制为主。
### __HTML <meta>__

开发者可以在HTML页面上插入meta标签来决定是否使用缓存。
    ```html
    <meta http-equiv="Pragma" content="no-cache">
    ```
以上代码就是告诉浏览器当前页面不被缓存，每次访问都需要往服务器拉取。然而，这种方式只有部分浏览器可以提供支持，而且所有的缓存代理服务器都不支持这种方式，因为代理无法解析HTML里面的内容。
    
### __HTTP协议定义的缓存机制__
HTTP协议定义的缓存机制主要有两种：Expires和Cache-control
* Expires策略
    Expires是服务器的响应消息头的字段，其值是一个deadline（过期时间），用来告诉浏览器当前所请求的资源的有效时间，若浏览器在资源过期前再次请求这个资源，则直接拿浏览器的缓存，倘若已过期，则向服务器重新请求该资源。
    然而Expires是http1.0的东西，目前默认浏览器使用的是http1.1，因此它的用处基本忽略。
        
* Cache-control策略
    Cache-control是http1.1的东西，是目前浏览器实现缓存的主要方式。与Expires相比，Cache-control同样是指定当前资源的有效期，但它有更多的选择与设置，倘若协议头同时存在Cache-control与Expires，前者的优先级更高。
    就一般情况而言，Cache-control得和Last-Modified/If-Modified-Since或Etag/If-None-Match配合使用。
    *  __Last-Modified/If-Modified-Since__
        Last-Modified指的是资源最后的修改时间，而If-Modified-Since指的是资源请求时间。当浏览器请求的资源过期后，它会重新向服务器发起请求，在请求头会携带If-Modified-Since这个字段，服务器拿到If-Modified-Since后会与文件的Last-Modified进行比较，若If-Modified-Since早于Last-Modified，意味着浏览器发起请求后，文件有修改，于是服务器返回200，将新内容返回给浏览器；而若If-Modified-Since晚于Last-Modified，这就意味着当前的资源没有被修改，返回304告诉浏览器继续使用缓存。

        __举个生动的栗子__
        （第一次请求，浏览器尚未有缓存）
        浏览器：啦啦啦，我要请求jquery文件
        服务器：OK，我把文件给你，额，顺便跟你说下，咱们使用的Last-Modified/If-Modified-Since这套方式哦，文件将在5分钟后过期。
        浏览器：好的么么哒。
        （五分钟后）
        浏览器：啦啦啦，文件过期了嘤嘤嘤。
        服务器：。。。把你的If-Modified-Since给我看下，额，你是23点10分发起的请求，然后文件的最后修改时间是23点
    


（未完待续...）

### 参考
* [浏览器缓存机制](http://www.cnblogs.com/skynet/archive/2012/11/28/2792503.html)（博文有一定的争议，里面有些问题无法讲通）
* [浅谈浏览器http的缓存机制](http://www.cnblogs.com/vajoy/p/5341664.html)