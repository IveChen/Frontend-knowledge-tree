# HTTP2和HTTP1.x的差异化

### 二进制分帧层

HTTP 1.x以换行符作为纯文本的分隔符，而HTTP 2.0将所有传输的信息分割为更小的消息和帧，并对它们采用二进制格式的编码。

### 流、消息和帧

所有HTTP 2 通信都在一个连接上完成，这个连接可以承载任意数量的双向数据流。

### 多向请求与响应

在HTTP 1.x中，如果客户端想要发送多个并行的请求以及改进性能，那么必须使用多个TCP连接。HTTP 2中新的二进制分帧层突破了这些限制，实现了多向请求和响应，客户端和服务器可以把HTTP消息分解为互不依赖的帧，然后乱序发送，最后再在另一端把它们重新组合起来。

### 请求优先级

在HTTP 1.x中，浏览器极少能利用到上述优先级信息，因为协议本身并不支持多路复用，也没有办法向服务器通告请求的优先级。HTTP 2一举解决了所有这些低效的问题：浏览器可以在发现资源是立即分派请求，指定每个流的优先级，让服务器决定最优的响应次序。

### 每个来源一个连接

每个来源一个连接显著减少了相关的资源占用：连接路径上的套接字管理工作量少了，内存占用少了，连接吞吐量大了。

### 流量控制

HTTP 2为数据流和连接的流量控制提供了一个简单的机制。HTTP 2.0连接建立之后，客户端与服务器交换SETTINGS帧，目的是设置双向的流量控制窗口大小。

### 服务器推送

HTTP 2新增的一个强大功能，就是服务器可以对一个客户端请求发送多个响应。换句话说，除了对最初请求的响应外，服务器还可以额外向客户端推送资源，而无需客户端明确地请求。

### 首部压缩

在HTTP 1.x中，首部元数据都是以纯文本形式发送的，通常会给每个请求增加500~800字节的负荷。如果算上HTTP cookie，增加的负荷通常会达到上千字节。为减少这些开销并提升性能，HTTP 2会压缩首部元数据。